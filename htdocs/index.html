<!doctype html>
<html lang="ja" ng-app="jangStudy">
    <style>
        .cookie {
            width: 100px;
            height: 100px;
            border-radius: 25px;
            background: #deb987;
        }
        .cookie.is-rarity {
            background: #d2691e;
        }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.2/angular.min.js">
    </script>
    <script>
        angular.module('jangStudy',[])
        .controller('MainCtrl', function () {
            var vm = this;
            var count = 1;
            vm.cookies = [];
            vm.money = 0;
            vm.cooking_message = '追加!';
            vm.cooking = function () {
                if (count <= 10) {
                     if(count %5 == 0){
                         vm.cookies.push({
                            id: count++,
                            rarity: true
                         });
                     } else {
                        vm.cookies.push({
                            id: count++,
                            rarity: false
                         });
                     }
                } else {
                    vm.cooking_message = 'もう追加できませんぬ';
                }
                console.log(vm.cookies);
            };
            vm.sellcooking = function (is_rarity, object_len) {
                count--;
                if(is_rarity) {
                    vm.money+=500;
                } else {
                    vm.money+=100;
                }
                vm.cookies.splice(object_len,1);
            };
        });
   </script>
    <body>
        <div class="cookie-factory" ng-controller="MainCtrl as main">
            <button ng-show="main.cookies.length < 10" ng-click="main.cooking()" ng-bind="main.cooking_message" > </button>
            <div ng-bind="main.money"></div>
            <div ng-show="main.cookies.length >= 10">
                もう追加できないので
            </div>
          <div class="cookie-storage"> 
              <div class="cookie" ng-repeat="cookie in main.cookies"
                  ng-class="{'is-rarity' : cookie.rarity}" ng-click="main.sellcooking(cookie.rarity, $index)" >             
            </div>
          </div>
        </div>
   </body>
</html>
